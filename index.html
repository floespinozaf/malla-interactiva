<!DOCTYPE html>
<html>
<head>
  <title>Malla Interactiva de Obstetricia</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f0f4f8;
      margin: 20px;
    }

    h1 {
      text-align: center;
      color: #2c3e50;
    }

    .fila-semestres {
      display: flex;
      gap: 20px;
      overflow-x: auto;
      padding: 20px 0;
    }

    .semestre {
      background-color: #ffffff;
      border: 1px solid #ddd;
      padding: 15px;
      border-radius: 8px;
      min-width: 220px;
      box-shadow: 2px 2px 8px #ccc;
      flex-shrink: 0;
    }

    .semestre h2 {
      text-align: center;
      color: #1a5276;
    }

    .ramo {
      background-color: #d6eaf8;
      border: 1px solid #2980b9;
      border-radius: 6px;
      padding: 10px;
      margin: 10px 0;
      cursor: pointer;
      color: #154360;
      text-align: center;
      transition: all 0.3s ease;
      font-size: 14px;
    }

    .ramo:hover {
      background-color: #aed6f1;
    }

    .ramo.completado {
      text-decoration: line-through;
      background-color: #c8e6c9;
      color: #1e4620;
      cursor: default;
    }

    .ramo.deshabilitado {
      background-color: #eeeeee;
      color: #999;
      border: 1px dashed #bbb;
      pointer-events: none;
    }
  </style>
</head>
<body>
  <h1>Malla Interactiva de Obstetricia</h1>

  <div class="fila-semestres">

    <!-- SEMESTRE 1 -->
    <div class="semestre">
      <h2>Semestre 1</h2>
      <div class="ramo" id="BBB" onclick="marcarRamo(this)">Bases biologicas y bioquimica</div>
      <div class="ramo" id="Anato" onclick="marcarRamo(this)">Anatomia e histologia</div>
      <div class="ramo" id="Coe" onclick="marcarRamo(this)">Comunicación oral y escrita I</div>
      <div class="ramo" id="Quim" onclick="marcarRamo(this)">Quimica</div>
      <div class="ramo" id="Intro" onclick="marcarRamo(this)">Introducción a la profesión</div>
      <div class="ramo" id="Antro" onclick="marcarRamo(this)">Antropologia cultural</div>
      <div class="ramo" id="SP" onclick="marcarRamo(this)">Salud pública</div>
      <div class="ramo" id="IE" onclick="marcarRamo(this)">Idioma extranjero I</div>
    </div>

    <!-- SEMESTRE 2 -->
    <div class="semestre">
      <h2>Semestre 2</h2>
      <div class="ramo deshabilitado" id="CoeII" data-prerrequisitos="Coe" onclick="marcarRamo(this)">Comunicación oral y escrita II</div>
      <div class="ramo" id="Fisio" onclick="marcarRamo(this)">Fisiologia</div>
      <div class="ramo" id="bio" onclick="marcarRamo(this)">Bioestadistica descriptiva</div>
      <div class="ramo deshabilitado" id="Psico" data-prerrequisitos="Antro" onclick="marcarRamo(this)">Psicologia evolutiva</div>
      <div class="ramo deshabilitado" id="IE II" data-prerrequisito="IE" onclick="marcarRamo(this)">Idioma extranjero II</div>
    </div>

    <!-- SEMESTRE 3 -->
    <div class="semestre">
      <h2>Semestre 3</h2>
      <div class="ramo" id="Auto" onclick="marcarRamo(this)">Autogestión del aprendizaje</div>
      <div class="ramo deshabilitado" id="Fiziopato" data-prerrequisitos="Fisio" onclick="marcarRamo(this)">Fisiopatologia</div>
      <div class="ramo deshabilitado" id="Micro" data-prerrequisito="BBB" onclick="marcarRamo(this)">Microbiologia</div>
      <div class="ramo deshabilitado" id="Embrio" data-prerrequistito="Anato,BBB" onclick="marcarRamo(this)">Embriologia</div>
      <div class="ramo deshabilitado" id="FMQ" data-prerrequisito="Fisio,Anato" onclick="marcarRamo(this)">Fundamentos Medico Quirurgico</div>
      <div class="ramo deshabilitado" id="Epide" data-prerrequisito="bio,SP" onclick="marcarRamo(this)">Epidemiologia</div>
      <div class="ramo deshabilitado" id="IE III" data-prerrequisito="IE II" onclick="marcarRamo(this)">Idioma extranjero III</div>
      <div class="ramo deshabilitado" id="SM" data-prerrequisito="Psico" onclick="marcarRamo(this)">Salud mental</div>
    </div>
    <!-- SEMESTRE 4 -->
    <div class="semestre">
      <h2>Semestre 4</h2>
      <div class="ramo deshabilitado" id="s4r1" data-prerrequisitos="s3r1" onclick="marcarRamo(this)">Ramo 4.1</div>
      <div class="ramo deshabilitado" id="s4r2" data-prerrequisitos="s3r2" onclick="marcarRamo(this)">Ramo 4.2</div>
      <div class="ramo" id="s4r3" onclick="marcarRamo(this)">Ramo 4.3</div>
      <div class="ramo" id="s4r4" onclick="marcarRamo(this)">Ramo 4.4</div>
      <div class="ramo" id="s4r5" onclick="marcarRamo(this)">Ramo 4.5</div>
      <div class="ramo" id="s4r6" onclick="marcarRamo(this)">Ramo 4.6</div>
      <div class="ramo" id="s4r7" onclick="marcarRamo(this)">Ramo 4.7</div>
      <div class="ramo" id="s4r8" onclick="marcarRamo(this)">Ramo 4.8</div>
    </div>

    <!-- SEMESTRE 5 -->
    <div class="semestre">
      <h2>Semestre 5</h2>
      <div class="ramo deshabilitado" id="s5r1" data-prerrequisitos="s4r1" onclick="marcarRamo(this)">Ramo 5.1</div>
      <div class="ramo deshabilitado" id="s5r2" data-prerrequisitos="s4r2" onclick="marcarRamo(this)">Ramo 5.2</div>
      <div class="ramo" id="s5r3" onclick="marcarRamo(this)">Ramo 5.3</div>
      <div class="ramo" id="s5r4" onclick="marcarRamo(this)">Ramo 5.4</div>
      <div class="ramo" id="s5r5" onclick="marcarRamo(this)">Ramo 5.5</div>
      <div class="ramo" id="s5r6" onclick="marcarRamo(this)">Ramo 5.6</div>
      <div class="ramo" id="s5r7" onclick="marcarRamo(this)">Ramo 5.7</div>
      <div class="ramo" id="s5r8" onclick="marcarRamo(this)">Ramo 5.8</div>
    </div>

    <!-- SEMESTRE 6 -->
    <div class="semestre">
      <h2>Semestre 6</h2>
      <div class="ramo deshabilitado" id="s6r1" data-prerrequisitos="s5r1" onclick="marcarRamo(this)">Ramo 6.1</div>
      <div class="ramo deshabilitado" id="s6r2" data-prerrequisitos="s5r2" onclick="marcarRamo(this)">Ramo 6.2</div>
      <div class="ramo" id="s6r3" onclick="marcarRamo(this)">Ramo 6.3</div>
      <div class="ramo" id="s6r4" onclick="marcarRamo(this)">Ramo 6.4</div>
      <div class="ramo" id="s6r5" onclick="marcarRamo(this)">Ramo 6.5</div>
      <div class="ramo" id="s6r6" onclick="marcarRamo(this)">Ramo 6.6</div>
      <div class="ramo" id="s6r7" onclick="marcarRamo(this)">Ramo 6.7</div>
      <div class="ramo" id="s6r8" onclick="marcarRamo(this)">Ramo 6.8</div>
    </div>
    <!-- SEMESTRE 7 -->
    <div class="semestre">
      <h2>Semestre 7</h2>
      <div class="ramo deshabilitado" id="s7r1" data-prerrequisitos="s6r1" onclick="marcarRamo(this)">Ramo 7.1</div>
      <div class="ramo deshabilitado" id="s7r2" data-prerrequisitos="s6r2" onclick="marcarRamo(this)">Ramo 7.2</div>
      <div class="ramo" id="s7r3" onclick="marcarRamo(this)">Ramo 7.3</div>
      <div class="ramo" id="s7r4" onclick="marcarRamo(this)">Ramo 7.4</div>
      <div class="ramo" id="s7r5" onclick="marcarRamo(this)">Ramo 7.5</div>
      <div class="ramo" id="s7r6" onclick="marcarRamo(this)">Ramo 7.6</div>
      <div class="ramo" id="s7r7" onclick="marcarRamo(this)">Ramo 7.7</div>
      <div class="ramo" id="s7r8" onclick="marcarRamo(this)">Ramo 7.8</div>
    </div>

    <!-- SEMESTRE 8 -->
    <div class="semestre">
      <h2>Semestre 8</h2>
      <div class="ramo deshabilitado" id="s8r1" data-prerrequisitos="s7r1" onclick="marcarRamo(this)">Ramo 8.1</div>
      <div class="ramo deshabilitado" id="s8r2" data-prerrequisitos="s7r2" onclick="marcarRamo(this)">Ramo 8.2</div>
      <div class="ramo" id="s8r3" onclick="marcarRamo(this)">Ramo 8.3</div>
      <div class="ramo" id="s8r4" onclick="marcarRamo(this)">Ramo 8.4</div>
      <div class="ramo" id="s8r5" onclick="marcarRamo(this)">Ramo 8.5</div>
      <div class="ramo" id="s8r6" onclick="marcarRamo(this)">Ramo 8.6</div>
      <div class="ramo" id="s8r7" onclick="marcarRamo(this)">Ramo 8.7</div>
      <div class="ramo" id="s8r8" onclick="marcarRamo(this)">Ramo 8.8</div>
    </div>

    <!-- SEMESTRE 9 -->
    <div class="semestre">
      <h2>Semestre 9</h2>
      <div class="ramo deshabilitado" id="s9r1" data-prerrequisitos="s8r1" onclick="marcarRamo(this)">Ramo 9.1</div>
      <div class="ramo deshabilitado" id="s9r2" data-prerrequisitos="s8r2" onclick="marcarRamo(this)">Ramo 9.2</div>
      <div class="ramo" id="s9r3" onclick="marcarRamo(this)">Ramo 9.3</div>
      <div class="ramo" id="s9r4" onclick="marcarRamo(this)">Ramo 9.4</div>
      <div class="ramo" id="s9r5" onclick="marcarRamo(this)">Ramo 9.5</div>
      <div class="ramo" id="s9r6" onclick="marcarRamo(this)">Ramo 9.6</div>
      <div class="ramo" id="s9r7" onclick="marcarRamo(this)">Ramo 9.7</div>
      <div class="ramo" id="s9r8" onclick="marcarRamo(this)">Ramo 9.8</div>
    </div>
    <!-- SEMESTRE 10 -->
    <div class="semestre">
      <h2>Semestre 10</h2>
      <div class="ramo deshabilitado" id="s10r1" data-prerrequisitos="s9r1" onclick="marcarRamo(this)">Ramo 10.1</div>
      <div class="ramo deshabilitado" id="s10r2" data-prerrequisitos="s9r2" onclick="marcarRamo(this)">Ramo 10.2</div>
      <div class="ramo" id="s10r3" onclick="marcarRamo(this)">Ramo 10.3</div>
      <div class="ramo" id="s10r4" onclick="marcarRamo(this)">Ramo 10.4</div>
      <div class="ramo" id="s10r5" onclick="marcarRamo(this)">Ramo 10.5</div>
      <div class="ramo" id="s10r6" onclick="marcarRamo(this)">Ramo 10.6</div>
      <div class="ramo" id="s10r7" onclick="marcarRamo(this)">Ramo 10.7</div>
      <div class="ramo" id="s10r8" onclick="marcarRamo(this)">Ramo 10.8</div>
    </div>

  </div> <!-- cierre de fila-semestres -->

  <script>
    const claveAlmacenamiento = 'ramosCompletados';

    function marcarRamo(elemento) {
      const id = elemento.id;
      if (!id) return;

      elemento.classList.add('completado');
      elemento.classList.remove('deshabilitado');
      elemento.onclick = null;

      guardarProgreso(id);
      revisarDesbloqueos();
    }

    function guardarProgreso(id) {
      let completados = JSON.parse(localStorage.getItem(claveAlmacenamiento)) || [];
      if (!completados.includes(id)) {
        completados.push(id);
        localStorage.setItem(claveAlmacenamiento, JSON.stringify(completados));
      }
    }

    function cargarProgreso() {
      const completados = JSON.parse(localStorage.getItem(claveAlmacenamiento)) || [];
      completados.forEach(id => {
        const ramo = document.getElementById(id);
        if (ramo) {
          ramo.classList.add('completado');
          ramo.classList.remove('deshabilitado');
          ramo.onclick = null;
        }
      });
    }

    function revisarDesbloqueos() {
      const ramosBloqueados = document.querySelectorAll('.ramo.deshabilitado');
      ramosBloqueados.forEach(ramo => {
        const requisitos = ramo.getAttribute('data-prerrequisitos');
        if (!requisitos) return;

        const lista = requisitos.split(',');
        const cumplidos = lista.every(id => {
          const ramoReq = document.getElementById(id);
          return ramoReq && ramoReq.classList.contains('completado');
        });

        if (cumplidos) {
          ramo.classList.remove('deshabilitado');
          ramo.onclick = function () { marcarRamo(this); };
        }
      });
    }

    window.onload = function () {
      cargarProgreso();
      revisarDesbloqueos();
    }
  </script>
</body>
</html>
