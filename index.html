<!DOCTYPE html>
<html>
<head>
  <title>Malla Obstetricia utalca</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #fbf4eb;
      margin: 20px;
    }

    h1 {
      text-align: center;
      color: #c43670;
    }

    .fila-semestres {
      display: flex;
      gap: 20px;
      overflow-x: auto;
      padding: 20px 0;
    }

    .semestre {
      background-color: #ffffff;
      border: 1px solid #ddd;
      padding: 15px;
      border-radius: 8px;
      min-width: 220px;
      box-shadow: 2px 2px 8px #ccc;
      flex-shrink: 0;
    }

    .semestre h2 {
      text-align: center;
      color: #c43670;
    }

    .ramo {
      background-color: #fbd9e5;
      border: 2px solid #f283af;
      border-radius: 10px;
      padding: 10px;
      margin: 10px 0;
      cursor: pointer;
      color: #c43670;
      text-align: center;
      transition: all 0.3s ease;
      font-size: 15px;
    }

    .ramo:hover {
      background-color: #aed6f1;
    }

    .ramo.completado {
      text-decoration: line-through;
      background-color: #c8e6c9;
      color: #1e4620;
      cursor: default;
    }

    .ramo.deshabilitado {
      background-color: #eeeeee;
      color: #999;
      border: 1px dashed #bbb;
      pointer-events: none;
    }
  </style>
</head>
<body>
  <h1>Malla Obstetricia Utalca</h1>

  <div class="fila-semestres">

    <!-- SEMESTRE 1 -->
    <div class="semestre">
      <h2>Semestre 1</h2>
      <div class="ramo" id="BBB" onclick="marcarRamo(this)">Bases biologicas y bioquimica</div>
      <div class="ramo" id="Anato" onclick="marcarRamo(this)">Anatomia e histologia</div>
      <div class="ramo" id="Coe" onclick="marcarRamo(this)">Comunicación oral y escrita I</div>
      <div class="ramo" id="Quim" onclick="marcarRamo(this)">Quimica</div>
      <div class="ramo" id="Intro" onclick="marcarRamo(this)">Introducción a la profesión</div>
      <div class="ramo" id="Antro" onclick="marcarRamo(this)">Antropologia cultural</div>
      <div class="ramo" id="SP" onclick="marcarRamo(this)">Salud pública</div>
      <div class="ramo" id="IE" onclick="marcarRamo(this)">Idioma extranjero I</div>
    </div>

    <!-- SEMESTRE 2 -->
    <div class="semestre">
      <h2>Semestre 2</h2>
      <div class="ramo deshabilitado" id="CoeII" data-prerrequisitos="Coe" onclick="marcarRamo(this)">Comunicación oral y escrita II</div>
      <div class="ramo" id="Fisio" onclick="marcarRamo(this)">Fisiologia</div>
      <div class="ramo" id="bio" onclick="marcarRamo(this)">Bioestadistica descriptiva</div>
      <div class="ramo deshabilitado" id="Psico" data-prerrequisitos="Antro" onclick="marcarRamo(this)">Psicologia evolutiva</div>
      <div class="ramo deshabilitado" id="IEII" data-prerrequisitos="IE" onclick="marcarRamo(this)">Idioma extranjero II</div>
    </div>

    <!-- SEMESTRE 3 -->
    <div class="semestre">
      <h2>Semestre 3</h2>
      <div class="ramo" id="Auto" onclick="marcarRamo(this)">Autogestión del aprendizaje</div>
      <div class="ramo deshabilitado" id="Fisiopato" data-prerrequisitos="Fisio" onclick="marcarRamo(this)">Fisiopatologia</div>
      <div class="ramo deshabilitado" id="Micro" data-prerrequisitos="BBB" onclick="marcarRamo(this)">Microbiologia</div>
      <div class="ramo deshabilitado" id="Embrio" data-prerrequisitos="BBB,Anato" onclick="marcarRamo(this)">Embriologia</div>
      <div class="ramo deshabilitado" id="FMQ" data-prerrequisitos="Fisio,Anato" onclick="marcarRamo(this)">Fundamentos Medico Quirurgico</div>
      <div class="ramo deshabilitado" id="Epide" data-prerrequisitos="bio,SP" onclick="marcarRamo(this)">Epidemiologia</div>
      <div class="ramo deshabilitado" id="IEIII" data-prerrequisitos="IEII" onclick="marcarRamo(this)">Idioma extranjero III</div>
      <div class="ramo deshabilitado" id="SM" data-prerrequisitos="Psico" onclick="marcarRamo(this)">Salud mental</div>
    </div>
    <!-- SEMESTRE 4 -->
    <div class="semestre">
      <h2>Semestre 4</h2>
      <div class="ramo deshabilitado" id="CMQ" data-prerrequisitos="FMQ" onclick="marcarRamo(this)">Clinica medico quirurgica</div>
      <div class="ramo deshabilitado" id="SFC" data-prerrequisitos="Epide,SP,Intro" onclick="marcarRamo(this)">Salud familiar y comunitaria</div>
      <div class="ramo deshabilitado" id="Farmaco" data-prerrequisitos="Fisiopato,Quim" onclick="marcarRamo(this)">Farmacologia</div>
      <div class="ramo deshabilitado" id="TEDHS" data-prerrequisitos="Auto" onclick="marcarRamo(this)"> Trabajo en equipo y desarrollo de habilidades sociales</div>
      <div class="ramo deshabilitado" id="ObsteI" data-prerrequisitos="Micro,Fisiopato,Anato" onclick="marcarRamo(this)">Obstetricia I</div>
      <div class="ramo deshabilitado" id="NeoI" data-prerrequisitos="Embrio,Fisiopato" onclick="marcarRamo(this)">Neonatologia I</div>
      <div class="ramo deshabilitado" id="IEIV" data-prerrequisitos="IEIII" onclick="marcarRamo(this)">Idioma extranjero IV</div>
    </div>

    <!-- SEMESTRE 5 -->
    <div class="semestre">
      <h2>Semestre 5</h2>
      <div class="ramo deshabilitado" id="GineI" data-prerrequisitos="Fisio,Anato" onclick="marcarRamo(this)">Ginecologia I</div>
      <div class="ramo deshabilitado" id="NeoII" data-prerrequisitos="NeoI" onclick="marcarRamo(this)">Neonatologia II</div>
      <div class="ramo deshabilitado" id="ObsteII" data-prerrequisitos="ObsteI" onclick="marcarRamo(this)">Obstetricia II</div>
      <div class="ramo deshabilitado" id="ICI" data-prerrequisitos="NeoI,ObsteI,CMQ" onclick="marcarRamo(this)">Integración clinica I</div>
      <div class="ramo deshabilitado" id="CCS" data-prerrequisitos="CoeII" onclick="marcarRamo(this)">Comprensión de contextos sociales</div>
      <div class="ramo deshabilitado" id="MDI" data-prerrequisitos="bio" onclick="marcarRamo(this)">Metodologia de la investigación</div>
      <div class="ramo deshabilitado" id="ML" data-prerrequisitos="Intro" onclick="marcarRamo(this)">Medicina legal</div>
      <div class="ramo deshabilitado" id="bioetica" data-prerrequisitos="NeoI,ObsteI" onclick="marcarRamo(this)">Bioetica</div>
      <div class="ramo deshabilitado" id="IEV" data-prerrequisitos="IEIV" onclick="marcarRamo(this)">Idioma extranjero V</div>
    </div>

    <!-- SEMESTRE 6 -->
    <div class="semestre">
      <h2>Semestre 6</h2>
      <div class="ramo deshabilitado" id="GS" data-prerrequisitos="SP" onclick="marcarRamo(this)">Gestión en salud</div>
      <div class="ramo deshabilitado" id="MI" data-prerrequisitos="NeoI,ObsteI,Fisio,Anato" onclick="marcarRamo(this)">Modulo Integrador</div>
      <div class="ramo deshabilitado" id="BioII" data-prerrequisitos="bio" onclick="marcarRamo(this)">Bioestadisticas inferencial</div>
      <div class="ramo deshabilitado" id="CCC" data-prerrequisitos="CCS" onclick="marcarRamo(this)">Comprensión de contextos culturales</div>
      <div class="ramo deshabilitado" id="IEVI" data-prerrequisitos="IEV" onclick="marcarRamo(this)">Idioma extranjero VI</div>
    </div>
    
    <!-- SEMESTRE 7 -->
    <div class="semestre">
      <h2>Semestre 7</h2>
      <div class="ramo deshabilitado" id="IAf" data-prerrequisitos="BioII,MDI" onclick="marcarRamo(this)">Investigación aplicada a la profesión</div>
      <div class="ramo deshabilitado" id="NeoIII" data-prerrequisitos="NeoII,Farmaco" onclick="marcarRamo(this)">Neonatologia III</div>
      <div class="ramo deshabilitado" id="ICII" data-prerrequisitos="bioetica,ML,ICI,ObsteII" onclick="marcarRamo(this)">Integración clinica II</div>
      <div class="ramo deshabilitado" id="ObsteIII" data-prerrequisitos="ObsteII,Farmaco" onclick="marcarRamo(this)">Obstetricia III</div>
      <div class="ramo deshabilitado" id="EYRS" data-prerrequisitos="CCC,TEDHS" onclick="marcarRamo(this)">Etica y responsabilidad social</div>
      <div class="ramo deshabilitado" id="GineII" data-prerrequisitos="GineI,Farmaco" onclick="marcarRamo(this)">Ginecologia II</div>
      <div class="ramo deshabilitado" id="GP" data-prerrequisitos="GS" onclick="marcarRamo(this)">Gestión de la profesión</div>
      <div class="ramo deshabilitado" id="TC" data-prerrequisitos="NeoII,ObsteII,GineI" onclick="marcarRamo(this)">Terapias complementarias</div>
    </div>

    <!-- SEMESTRE 8 -->
    <div class="semestre">
      <h2>Semestre 8</h2>
      <div class="ramo deshabilitado" id="MES" data-prerrequisitos="GineII" onclick="marcarRamo(this)">Mujer y envejecimiento saludable</div>
      <div class="ramo deshabilitado" id="GSFC" data-prerrequisitos="GP" onclick="marcarRamo(this)">Gestión y salud familiar y comunitaria</div>
      <div class="ramo deshabilitado" id="RS" data-prerrequisitos="EYRS" onclick="marcarRamo(this)">Responsabilidad social</div>
    </div>

    <!-- SEMESTRE 9 y 10 -->
    <div class="semestre">
      <h2>Semestre 9 y 10</h2>
      <div class="ramo deshabilitado" id="Int" data-prerrequisitos="RS,GSFC,MES,EYRS,GP,GineII" onclick="marcarRamo(this)">Internado profesional</div>
    </div>
  
  </div> <!-- cierre de fila-semestres -->

  <script>
  const claveAlmacenamiento = 'ramosCompletados';

  function marcarRamo(elemento) {
    const id = elemento.id;
    if (!id) return;

    let completados = JSON.parse(localStorage.getItem(claveAlmacenamiento)) || [];

    // Si ya está completado: destachar
    if (elemento.classList.contains('completado')) {
      elemento.classList.remove('completado');
      completados = completados.filter(r => r !== id);
      localStorage.setItem(claveAlmacenamiento, JSON.stringify(completados));
      resetearTodos();
      cargarProgreso(); // vuelve a aplicar progreso y prerrequisitos
      return;
    }

    // Si no está completado: tachar y guardar
    elemento.classList.add('completado');
    if (!completados.includes(id)) {
      completados.push(id);
      localStorage.setItem(claveAlmacenamiento, JSON.stringify(completados));
    }
    revisarDesbloqueos();
  }

  function cargarProgreso() {
    const completados = JSON.parse(localStorage.getItem(claveAlmacenamiento)) || [];
    completados.forEach(id => {
      const ramo = document.getElementById(id);
      if (ramo) {
        ramo.classList.add('completado');
      }
    });
    revisarDesbloqueos();
  }

  function revisarDesbloqueos() {
    const ramos = document.querySelectorAll('.ramo');
    ramos.forEach(ramo => {
      const requisitos = ramo.getAttribute('data-prerrequisitos');
      if (!requisitos) {
        ramo.classList.remove('deshabilitado');
        return;
      }

      const lista = requisitos.split(',');
      const completados = JSON.parse(localStorage.getItem(claveAlmacenamiento)) || [];
      const cumplidos = lista.every(id => completados.includes(id));

      if (cumplidos) {
        ramo.classList.remove('deshabilitado');
      } else {
        ramo.classList.add('deshabilitado');
        ramo.classList.remove('completado');
      }
    });
  }

  function resetearTodos() {
    const ramos = document.querySelectorAll('.ramo');
    ramos.forEach(ramo => {
      ramo.classList.remove('completado');
      ramo.classList.remove('deshabilitado');
    });
  }

  window.onload = function () {
    cargarProgreso();
  }
  </script>
</body>
</html>
